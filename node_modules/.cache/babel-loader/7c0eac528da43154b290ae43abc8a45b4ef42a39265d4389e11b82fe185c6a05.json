{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"./MiCuenta.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MiCuenta=_ref=>{let{user,userProfile,handleLogout}=_ref;const storedUser=user||JSON.parse(localStorage.getItem(\"user\"));const[profileData,setProfileData]=useState(userProfile);useEffect(()=>{if((storedUser===null||storedUser===void 0?void 0:storedUser.type)===\"Admin\"){setProfileData({...storedUser});return;}if(!profileData&&storedUser){const token=localStorage.getItem(\"token\");const email=storedUser.email;let apiUrl=\"\";if(storedUser.type===\"Jugador\"){apiUrl=`http://localhost:8000/api/jugadores/email/${email}`;}else if(storedUser.type===\"Club\"){apiUrl=`http://localhost:8000/api/clubs/email/${email}`;}if(token&&email&&apiUrl){fetch(apiUrl,{headers:{Authorization:`Bearer ${token}`,\"Content-Type\":\"application/json\"}}).then(async res=>{const contentType=res.headers.get(\"content-type\");if(!res.ok||!contentType||!contentType.includes(\"application/json\")){return null;}return await res.json();}).then(data=>{if(data&&!data.error){setProfileData({...data,type:storedUser.type});}}).catch(err=>{console.error(\"Error al cargar el perfil:\",err.message);});}}},[profileData,storedUser]);if(!storedUser){return/*#__PURE__*/_jsx(\"div\",{className:\"mi-cuenta-container\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"No has iniciado sesi\\xF3n\"})});}if(!profileData){return/*#__PURE__*/_jsx(\"div\",{className:\"mi-cuenta-container\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Cargando datos del perfil...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"mi-cuenta-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Bienvenido, \",profileData.name,\"!\"]}),profileData.type===\"Jugador\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nombre:\"}),\" \",profileData.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Apellido:\"}),\" \",profileData.lastName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",profileData.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"DNI:\"}),\" \",profileData.dni]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Direcci\\xF3n:\"}),\" \",profileData.address]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ciudad:\"}),\" \",profileData.city]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Fecha de nacimiento:\"}),\" \",profileData.dateOfBirth]})]}),profileData.type===\"Club\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nombre del Club:\"}),\" \",profileData.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",profileData.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ciudad:\"}),\" \",profileData.city]})]}),profileData.type===\"Admin\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nombre:\"}),\" \",profileData.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",profileData.email]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-button\",children:\"Cerrar sesi\\xF3n\"})]});};export default MiCuenta;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MiCuenta","_ref","user","userProfile","handleLogout","storedUser","JSON","parse","localStorage","getItem","profileData","setProfileData","type","token","email","apiUrl","fetch","headers","Authorization","then","res","contentType","get","ok","includes","json","data","error","catch","err","console","message","className","children","name","lastName","dni","address","city","dateOfBirth","onClick"],"sources":["C:/Users/gerar/OneDrive/Documentos/proyecto/frontend/src/MiCuenta.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./MiCuenta.css\";\n\nconst MiCuenta = ({ user, userProfile, handleLogout }) => {\n  const storedUser = user || JSON.parse(localStorage.getItem(\"user\"));\n  const [profileData, setProfileData] = useState(userProfile);\n\n  useEffect(() => {\n    if (storedUser?.type === \"Admin\") {\n      setProfileData({ ...storedUser });\n      return;\n    }\n\n    if (!profileData && storedUser) {\n      const token = localStorage.getItem(\"token\");\n      const email = storedUser.email;\n      let apiUrl = \"\";\n\n      if (storedUser.type === \"Jugador\") {\n        apiUrl = `http://localhost:8000/api/jugadores/email/${email}`;\n      } else if (storedUser.type === \"Club\") {\n        apiUrl = `http://localhost:8000/api/clubs/email/${email}`;\n      }\n\n      if (token && email && apiUrl) {\n        fetch(apiUrl, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n        })\n          .then(async (res) => {\n            const contentType = res.headers.get(\"content-type\");\n            if (!res.ok || !contentType || !contentType.includes(\"application/json\")) {\n              return null;\n            }\n            return await res.json();\n          })\n          .then((data) => {\n            if (data && !data.error) {\n              setProfileData({ ...data, type: storedUser.type });\n            }\n          })\n          .catch((err) => {\n            console.error(\"Error al cargar el perfil:\", err.message);\n          });\n      }\n    }\n  }, [profileData, storedUser]);\n\n  if (!storedUser) {\n    return (\n      <div className=\"mi-cuenta-container\">\n        <h1>No has iniciado sesión</h1>\n      </div>\n    );\n  }\n\n  if (!profileData) {\n    return (\n      <div className=\"mi-cuenta-container\">\n        <p>Cargando datos del perfil...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"mi-cuenta-container\">\n      <h1>Bienvenido, {profileData.name}!</h1>\n\n      {profileData.type === \"Jugador\" && (\n        <>\n          <p><strong>Nombre:</strong> {profileData.name}</p>\n          <p><strong>Apellido:</strong> {profileData.lastName}</p>\n          <p><strong>Email:</strong> {profileData.email}</p>\n          <p><strong>DNI:</strong> {profileData.dni}</p>\n          <p><strong>Dirección:</strong> {profileData.address}</p>\n          <p><strong>Ciudad:</strong> {profileData.city}</p>\n          <p><strong>Fecha de nacimiento:</strong> {profileData.dateOfBirth}</p>\n        </>\n      )}\n\n      {profileData.type === \"Club\" && (\n        <>\n          <p><strong>Nombre del Club:</strong> {profileData.name}</p>\n          <p><strong>Email:</strong> {profileData.email}</p>\n          <p><strong>Ciudad:</strong> {profileData.city}</p>\n        </>\n      )}\n\n      {profileData.type === \"Admin\" && (\n        <>\n          <p><strong>Nombre:</strong> {profileData.name}</p>\n          <p><strong>Email:</strong> {profileData.email}</p>\n        </>\n      )}\n\n      <button onClick={handleLogout} className=\"logout-button\">\n        Cerrar sesión\n      </button>\n    </div>\n  );\n};\n\nexport default MiCuenta;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}